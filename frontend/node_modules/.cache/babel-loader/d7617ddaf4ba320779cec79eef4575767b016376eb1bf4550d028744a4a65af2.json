{"ast":null,"code":"// src/helpers/api.js\nconst DEV_BASE = \"http://localhost:7542\"; // backend\nconst ENV_BASE = (process.env.REACT_APP_API_URL || DEV_BASE).replace(/\\/$/, \"\");\n\n/**\n * api(\"/api/properties?page=1\")\n * api(\"api/properties/1\")\n * api(\"http://localhost:7542/api/properties\")\n */\nexport async function api(path, init = {}) {\n  let url = path;\n  if (!/^https?:\\/\\//i.test(path)) {\n    // normalize: ensure it becomes http://localhost:7542/api/...\n    const p = path.replace(/^\\/+/, \"\");\n    url = p.startsWith(\"api/\") ? `${ENV_BASE}/${p}` : p.startsWith(\"/api/\") ? `${ENV_BASE}${path}` : `${ENV_BASE}/api/${p}`;\n  }\n\n  // public GET: don't send cookies (avoids preflight headaches)\n  const res = await fetch(url, {\n    method: \"GET\",\n    credentials: \"omit\",\n    headers: {\n      Accept: \"application/json\",\n      ...(init.headers || {})\n    },\n    ...init\n  });\n  if (!res.ok) {\n    const txt = await res.text().catch(() => \"\");\n    throw new Error(`HTTP ${res.status}${txt ? ` - ${txt}` : \"\"}`);\n  }\n  return res.json();\n}","map":{"version":3,"names":["DEV_BASE","ENV_BASE","process","env","REACT_APP_API_URL","replace","api","path","init","url","test","p","startsWith","res","fetch","method","credentials","headers","Accept","ok","txt","text","catch","Error","status","json"],"sources":["/Users/alaaabdalqader/Desktop/real-final/Real-Estate-Website-main-470e2a0e74fc6efb6cbe0f36a3a298f0f2961b28/frontend/src/helpers/api.js"],"sourcesContent":["// src/helpers/api.js\nconst DEV_BASE = \"http://localhost:7542\"; // backend\nconst ENV_BASE = (process.env.REACT_APP_API_URL || DEV_BASE).replace(/\\/$/, \"\");\n\n/**\n * api(\"/api/properties?page=1\")\n * api(\"api/properties/1\")\n * api(\"http://localhost:7542/api/properties\")\n */\nexport async function api(path, init = {}) {\n  let url = path;\n\n  if (!/^https?:\\/\\//i.test(path)) {\n    // normalize: ensure it becomes http://localhost:7542/api/...\n    const p = path.replace(/^\\/+/, \"\");\n    url = p.startsWith(\"api/\") ? `${ENV_BASE}/${p}` :\n      p.startsWith(\"/api/\") ? `${ENV_BASE}${path}` :\n        `${ENV_BASE}/api/${p}`;\n  }\n\n  // public GET: don't send cookies (avoids preflight headaches)\n  const res = await fetch(url, {\n    method: \"GET\",\n    credentials: \"omit\",\n    headers: { Accept: \"application/json\", ...(init.headers || {}) },\n    ...init,\n  });\n\n  if (!res.ok) {\n    const txt = await res.text().catch(() => \"\");\n    throw new Error(`HTTP ${res.status}${txt ? ` - ${txt}` : \"\"}`);\n  }\n  return res.json();\n}\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,uBAAuB,CAAC,CAAC;AAC1C,MAAMC,QAAQ,GAAG,CAACC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAIJ,QAAQ,EAAEK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;;AAE/E;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,GAAGA,CAACC,IAAI,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;EACzC,IAAIC,GAAG,GAAGF,IAAI;EAEd,IAAI,CAAC,eAAe,CAACG,IAAI,CAACH,IAAI,CAAC,EAAE;IAC/B;IACA,MAAMI,CAAC,GAAGJ,IAAI,CAACF,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAClCI,GAAG,GAAGE,CAAC,CAACC,UAAU,CAAC,MAAM,CAAC,GAAG,GAAGX,QAAQ,IAAIU,CAAC,EAAE,GAC7CA,CAAC,CAACC,UAAU,CAAC,OAAO,CAAC,GAAG,GAAGX,QAAQ,GAAGM,IAAI,EAAE,GAC1C,GAAGN,QAAQ,QAAQU,CAAC,EAAE;EAC5B;;EAEA;EACA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;IAC3BM,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE,MAAM;IACnBC,OAAO,EAAE;MAAEC,MAAM,EAAE,kBAAkB;MAAE,IAAIV,IAAI,CAACS,OAAO,IAAI,CAAC,CAAC;IAAE,CAAC;IAChE,GAAGT;EACL,CAAC,CAAC;EAEF,IAAI,CAACK,GAAG,CAACM,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,EAAE,CAAC;IAC5C,MAAM,IAAIC,KAAK,CAAC,QAAQV,GAAG,CAACW,MAAM,GAAGJ,GAAG,GAAG,MAAMA,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;EAChE;EACA,OAAOP,GAAG,CAACY,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}